{% extends 'hod_template/base_template.html' %}

{% block page_title %}
    Leave Apply by Staffs
{% endblock page_title %}

{% block main_content %}

{% load static %}

<section class="content">
    <div class="container mx-auto px-4">

        <div class="flex flex-col">
            <div class="w-full">
                <!-- General form elements -->
                <div class="bg-white shadow-md rounded-lg">
                    <div class="p-4 border-b">
                        <h3 class="text-xl font-semibold">Leave Apply by Staffs</h3>
                    </div>
                    
                    <div class="table-responsive">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead>
                                <tr class="bg-gray-100">
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Staff ID</th>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Staff Name</th>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Leave Date</th>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Leave Message</th>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Applied On</th>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Action</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                {% for leave in leaves %}
                                <tr>
                                    <td class="px-4 py-2 whitespace-nowrap">{{ leave.id }}</td>
                                    <td class="px-4 py-2 whitespace-nowrap">{{ leave.staff_id.admin.id }}</td>
                                    <td class="px-4 py-2 whitespace-nowrap">{{ leave.staff_id.admin.first_name }} {{ leave.staff_id.admin.last_name }}</td>
                                    <td class="px-4 py-2 whitespace-nowrap">{{ leave.leave_date }}</td>
                                    <td class="px-4 py-2 whitespace-nowrap">{{ leave.leave_message }}</td>
                                    <td class="px-4 py-2 whitespace-nowrap">{{ leave.created_at }}</td>
                                    <td class="px-4 py-2 whitespace-nowrap">
                                        {% if leave.leave_status == 0 %}
                                            <a href="{% url 'staff_leave_approve' leave_id=leave.id %}" class="bg-green-500 text-white font-semibold py-2 px-4 rounded hover:bg-green-600 transition duration-300">Approve</a>
                                            <a href="{% url 'staff_leave_reject' leave_id=leave.id %}" class="bg-red-500 text-white font-semibold py-2 px-4 rounded hover:bg-red-600 transition duration-300">Reject</a>
                                        {% elif leave.leave_status == 1 %}
                                            <span class="bg-yellow-500 text-white font-semibold py-2 px-4 rounded">Approved</span>
                                        {% else %}
                                            <span class="bg-red-500 text-white font-semibold py-2 px-4 rounded">Rejected</span>
                                        {% endif %}
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    
                </div>
                <!-- /.card -->
            </div>
        </div>

    </div><!-- /.container-fluid -->
</section>

{% endblock main_content %}

{% comment %} Custom JS to Identify the Reply and Post Reply {% endcomment %}

{% block custom_js %}
<!-- Custom JavaScript can be added here if needed -->
{% endblock custom_js %}
